<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <title>Babylon.js sample code</title>

  <!-- Babylon.js -->
  <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
  <script src="https://preview.babylonjs.com/ammo.js"></script>
  <script src="https://preview.babylonjs.com/cannon.js"></script>
  <script src="https://preview.babylonjs.com/Oimo.js"></script>
  <script src="https://preview.babylonjs.com/earcut.min.js"></script>
  <script src="https://preview.babylonjs.com/babylon.js"></script>
  <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
  <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
  <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
  <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
  <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
  <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
  <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>

  <style>
    html,
    body {
      overflow: hidden;
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    #renderCanvas {
      width: 100%;
      height: 100%;
      touch-action: none;
    }
  </style>
</head>

<body>
  <div class="dimostrazione">
    <h1>B(UY) DESIGN</h1>
    <p>Martinelli Luce / 629/SC cobra scorpius</p>
    <p> <small> design elio martinelli, emiliana martinelli, 1968 </small> </p>
    <details>
      <summary>+ info</summary>
      <small>I 50 anni di una lampada così importante per la Martinelli Luce come il Cobra disegnato dal suo fondatore Elio Martinelli rappresentano certamente un evento importante per l’azienda. In questa occasione viene proposta una speciale versione del
      Cobra, un'interpretazione di Emiliana Martinelli come omaggio a suo padre. La lampada, prodotta solo in un esclusivo colore blu notte, è caratterizzata da serie di fori sulla calotta, a rappresentare la costellazione dello Scorpione, il segno
      zodiacale di Elio.
      Il corpo inferiore ruota sulla base sottostante in acciaio ed è collegato al corpo superiore tramite un giunto centrale che permette la rotazione di 360°. Riflettore interno in alluminio verniciato nel colore bianco.
      Disegnata nel 1968 da Elio Martinelli, il Cobra rappresenta uno dei primi apparecchi illuminanti in resina prodotti con un particolare sistema di stampaggio. La lampada è caratterizzata da una linea semplice e da una forma geometrica inscritta
      in una sfera, ma con la rotazione del braccio il riflettore assume una posizione che richiama la testa di un cobra pronto allo scatto.
    </small>
    </details>
    <br>
    <p> <a target="_blank" href="https://martinelliluce.it/it/Catalog/cobra/cobra-scorpius-629sc">Vai al sito del produttore</a> </p>
  </div>
  <style media="screen">
    .dimostrazione {
      font-family: helvetica, sans-serif;
      padding: 20px;
      margin: 20px;
      width: 17%;
      font-size: 20px;
      background-color: rgba(255, 255, 255, 0.5);
      position: absolute;
      top: 0;
      right: 0;
      z-index: 10;
    }

    .dimostrazione p {
      margin: .3em;
    }

    .dimostrazione h1 {
      font-weight: bold;
    }
  </style>
  <canvas id="renderCanvas"></canvas>
  <script>
    var canvas = document.getElementById("renderCanvas");

    var engine = null;
    var scene = null;
    var sceneToRender = null;
    var createDefaultEngine = function() {
      return new BABYLON.Engine(canvas, true, {
        preserveDrawingBuffer: true,
        stencil: true,
        disableWebGL2Support: false
      });
    };
    var delayCreateScene = function() {
      // Create a scene.
      var scene = new BABYLON.Scene(engine);

      // Create a default skybox with an environment.
      //var hdrTexture = BABYLON.CubeTexture.CreateFromPrefilteredData("textures/test.dds", scene);
      var hdrTexture = new BABYLON.HDRCubeTexture("textures/santissima_bn.hdr", scene, 1000);
      var currentSkybox = scene.createDefaultSkybox(hdrTexture, true, 20000);

      // Append glTF model to scene.
      BABYLON.SceneLoader.Append("scenes/cobra/", "cobra.gltf", scene, function(scene) {
        //BABYLON.SceneLoader.Append("scenes/BoomBox/", "BoomBox.gltf", scene, function (scene) {
        // Create a default arc rotate camera and light.
        scene.createDefaultCameraOrLight(true, true, true);

        // The default camera looks at the back of the asset.
        // Rotate the camera by 180 degrees to the front of the asset.
        scene.activeCamera.alpha += Math.PI;
      });

      return scene;
    };
    var engine;
    var scene;
    initFunction = async function() {
      var asyncEngineCreation = async function() {
        try {
          return createDefaultEngine();
        } catch (e) {
          console.log("the available createEngine function failed. Creating the default engine instead");
          return createDefaultEngine();
        }
      }

      engine = await asyncEngineCreation();
      if (!engine) throw 'engine should not be null.';
      scene = delayCreateScene();
    };
    initFunction().then(() => {
      sceneToRender = scene
      engine.runRenderLoop(function() {
        if (sceneToRender && sceneToRender.activeCamera) {
          sceneToRender.render();
        }
      });
    });

    // Resize
    window.addEventListener("resize", function() {
      engine.resize();
    });
  </script>
</body>

</html>
